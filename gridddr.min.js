!function(e){e.gridddr=function(t){return e("body").gridddr(t,!0)},e.fn.gridddr=function(t,i){var a={debug:!1,relative:!1,container:null,itemClass:!1,itemTag:"img",defaultClasses:{container:".gridddr-container",item:".gridddr-item",overlay:".gridddr-overlay",invisible:".gridddr-invisible"},saveNode:!1,itemWidth:150,itemHeight:150,preloading:!0,overlay:!0,overlayOpacity:!0,gridX:!1,gridY:!1,repeat:!0,useGPU:!0,animations:!0,animationType:"flip",animationsSpeed:1e3},r=e.extend(a,t),s={findGridddrItems:function(e){var t=r.itemTag&&r.itemClass?r.itemTag+r.itemClass:!1||r.itemTag||r.itemClass||"*";return s.debug("Looking for:",t),e.find(">"+t)},generateWrapper:function(t){return t.wrap(e("<div/>",{"class":r.defaultClasses.item.slice(1)})).parent()},wrapItems:function(t){var i=s.findGridddrItems(t);return i.size()>0&&i.each(function(){var t=r.saveNode?e(this):s.generateWrapper(e(this));r.preloading&&t.addClass(r.defaultClasses.invisible.slice(1)),r.defaultClasses.item&&!t.hasClass(r.defaultClasses.item.slice(1))&&t.addClass(r.defaultClasses.item.slice(1)),r.itemWidth&&t.width(Number(r.itemWidth)),r.itemHeight&&t.height(Number(r.itemHeight))}),s.createGrid(t,i)},setRelativeClass:function(e,t){var t=t||r.relative||!1;return t?e.addClass("relative"):e.removeClass("relative"),!0},createGrid:function(){return!0},overlay:function(t){if(0!=r.overlay){var i=e(t.find(r.defaultClasses.overlay).get(0)||t.prepend(e("<div/>",{"class":r.defaultClasses.overlay.slice(1)})).find(r.defaultClasses.overlay).get(0));"true"!=r.overlay.toString()&&s.css(i,"background-color",r.overlay.toString()),"number"==typeof r.overlayOpacity?s.css(i,"opacity",Number(r.overlayOpacity)):"boolean"==typeof r.overlayOpacity&&s.css(i,"opacity",Math.min(.9,Number(r.overlayOpacity)))}return!0},css:function(e,t,i,a){if(r.animations){if("object"!=typeof t){var n=t;t={},t[n]=i,delete n,delete i}e.animate(t,r.animationsSpeed||0,a||!1)}else e.css(t,i||!1),"function"==typeof a?a.call():"function"==typeof window[a]?window[a]():s.debug(a,"function dows not exist.");return!0},preloadContent:function(t){if(r.preloading){var i=t.find(r.defaultClasses.item+">[data-src]");i.size()>0&&i.each(function(){var t=e(this),i=t.data("src");e("<img>").attr("src",i).one("load",function(){t.attr("src",i).removeData("src"),t.parent().removeClass(r.defaultClasses.invisible.slice(1))})})}return!0},debug:function(){return r.debug&&console?(console.log.apply(console,arguments),!0):!1},inititalize:function(t,i){var a=e(i);return a.hasClass(r.defaultClasses.container.slice(1))||a.addClass(r.defaultClasses.container.slice(1)),r.relative&&s.setRelativeClass(a,!0),s.overlay(a)&&s.wrapItems(a)&&!a.data("inititalized")?(s.preloadContent(a),a.data("inititalized",!0),s.debug(i,"inititalized as Gridddr."),!0):(s.debug("Something went wrong"),!1)}},n={getSettings:function(){return r},setOverlayOpacity:function(t){var t=t||!!t;return r.overlayOpacity=t,s.overlay(e(r.container)),this}};return e.extend(this,n),e.each(this,s.inititalize),this}}(jQuery);